(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{106:function(e,t,a){e.exports={"login-form":"LoginForm_login-form__40Eo9","login-form-forgot":"LoginForm_login-form-forgot__1yxxP","login-form-button":"LoginForm_login-form-button__nJkDr"}},107:function(e,t,a){e.exports={wrapper:"login_wrapper__2h4O6","login-box":"login_login-box__eOHuz",title:"login_title__xyNIF"}},108:function(e,t,a){e.exports={form:"ebookForm_form__1c_g8","form-item":"ebookForm_form-item__1Hfuh","form-item-submit":"ebookForm_form-item-submit__2rdCB"}},203:function(e,t,a){e.exports={wrapper:"add_wrapper__353VY",placeholder:"add_placeholder__b5QBS"}},209:function(e,t,a){e.exports=a(437)},30:function(e,t,a){e.exports={wrapper:"AppLayout_wrapper__3TxMO",header:"AppLayout_header__2K45L",trigger:"AppLayout_trigger__2CCeD",home:"AppLayout_home__3as3z","icon-group":"AppLayout_icon-group__28j-R","icon-box":"AppLayout_icon-box__3XFcp",icon:"AppLayout_icon__5QxPR"}},436:function(e,t,a){},437:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),o=a.n(l),c=a(49),u=a(188),i=a(27),s=a(139),m=a(189),p=a.n(m),h={isCollapsed:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIDEBAR_COLLAPSE":return{isCollapsed:!0};case"SIDEBAR_SPREAD":return{isCollapsed:!1};default:return e}},b={isAuth:!1,authToken:"",history:null},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return Object.assign({},e,{isAuth:!0,authToken:t.payload.token,history:t.payload.history});case"AUTH_NOT":return Object.assign({},e,{isAuth:!1,authToken:"",history:null});default:return e}},E=Object(i.c)({layout:f,auth:d}),g=a(190),_={key:"root",storage:p.a,whitelist:["auth"]},y=Object(s.a)(_,E),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,O=Object(i.e)(y,v(Object(i.a)(g.a))),k=Object(s.b)(O),j=(a(89),a(4)),A=(a(140),a(33)),N=a(40),w=a(52),x=a(207),C=a(191);var S=function(e){var t=e.children,a=Object(C.a)(e,["children"]),n=Object(x.a)({},a).isAuth;return r.a.createElement(w.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(w.a,{to:{pathname:"/login",state:{from:a}}})}}))},I=(a(224),a(205)),T=(a(110),a(65)),L=(a(227),a(69)),D=a(83),R=a.n(D),P=function(){var e=sessionStorage.getItem("persist:root"),t=JSON.parse(e).auth;return JSON.parse(t).authToken},F=R.a.create({baseURL:"http://localhost:3000",timeout:5e3});F.interceptors.request.use((function(e){return P()&&(e.headers.Authorization=P()),e}));var H=R.a.create({baseURL:"http://localhost:3000",timeout:5e3});H.interceptors.request.use((function(e){return P()&&(e.headers.Authorization=P()),e.headers["Content-Type"]="multipart/form-data",e}));var B="http://120.55.47.104:12833",U=(a(149),a(68)),q=function(e,t){switch(e){case"success":return U.a.success(t);case"error":return U.a.error(t);default:return null}},z=function(e,t,a){return function(n){return function(e,t){return R.a.post("".concat(B,"/login"),{username:e,password:t})}(e,t).then((function(e){q("success","\u767b\u5f55\u6210\u529f\uff01"),n(function(e,t){return{type:"AUTH",payload:{token:e,history:t}}}(e.data.token,a)),a.push("/")})).catch((function(e){q("error","\u8f93\u5165\u5e10\u53f7\u5bc6\u7801\u9519\u8bef"),console.error(e)}))}},J=a(30),M=a.n(J),Q=L.a.Header,V=L.a.Sider,X=L.a.Content,G=Object(c.b)((function(e){return{isCollapsed:e.layout.isCollapsed}}),(function(e){return{toggle:function(t){e(t?{type:"SIDEBAR_SPREAD"}:{type:"SIDEBAR_COLLAPSE"})},signOut:function(t){e({type:"AUTH_NOT"}),t.push("/login")}}}))((function(e){var t=Object(w.g)(),a=e.isCollapsed,n=e.toggle,l=e.signOut;return r.a.createElement(L.a,{className:M.a.wrapper},r.a.createElement(V,{trigger:null,collapsible:!0,collapsed:a},e.sidebar),r.a.createElement(L.a,null,r.a.createElement(Q,{className:M.a.header},r.a.createElement(j.a,{className:M.a.trigger,type:a?"menu-unfold":"menu-fold",onClick:function(){return n(a)}}),r.a.createElement("span",{className:M.a.home},"\u9996\u9875"),r.a.createElement("div",{className:M.a["icon-group"]},r.a.createElement("span",{className:M.a["icon-box"]},r.a.createElement(j.a,{className:M.a.icon,type:"fullscreen"})),r.a.createElement("span",{className:M.a["icon-box"]},r.a.createElement(T.a,{placement:"bottom",title:"\u5b57\u4f53\u5927\u5c0f"},r.a.createElement(j.a,{className:M.a.icon,type:"font-size"}))),r.a.createElement("span",{className:M.a["icon-box"]},r.a.createElement(I.a,{overlay:function(){return function(e,t){return r.a.createElement(A.a,null,r.a.createElement(A.a.Item,null,r.a.createElement("a",{href:"https://github.com/cnscorpions/React-Nest-Admin",target:"_blank",rel:"noopener noreferrer"},"\u6e90\u7801")),r.a.createElement(A.a.Item,{onClick:function(){return e(t)}},r.a.createElement("span",null,"\u9000\u51fa")))}(l,t)},placement:"bottomCenter"},r.a.createElement(j.a,{className:M.a.icon,type:"more"}))))),r.a.createElement(X,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},e.content)))})),K=a(46),Y=a(47),W=a(50),Z=a(48),$=a(51),ee=function(e){function t(){return Object(K.a)(this,t),Object(W.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Home")}}]),t}(n.Component),te=(a(72),a(20)),ae=(a(296),a(206)),ne=(a(186),a(38)),re=(a(163),a(86)),le=a(106),oe=a.n(le),ce=function(e){function t(){var e,a;Object(K.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(W.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||(console.log("Received values of form: ",t),a.props.submitToParent(t))}))},a}return Object($.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ne.a,{onSubmit:this.handleSubmit,className:oe.a["login-form"]},r.a.createElement(ne.a.Item,null,e("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}]})(r.a.createElement(re.a,{prefix:r.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5e10\u53f7",autoComplete:"on"}))),r.a.createElement(ne.a.Item,null,e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})(r.a.createElement(re.a,{prefix:r.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801",autoComplete:"on"}))),r.a.createElement(ne.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(ae.a,null,"\u8bb0\u4f4f\u5bc6\u7801")),r.a.createElement("a",{className:oe.a["login-form-forgot"],href:"/forget-pwd"},"\u5fd8\u8bb0\u5bc6\u7801"),r.a.createElement(te.a,{type:"primary",htmlType:"submit",className:oe.a["login-form-button"]},"\u767b\u5f55"),"\u6216 ",r.a.createElement("a",{href:"/home"},"\u73b0\u5728\u6ce8\u518c\uff01")))}}]),t}(n.Component),ue=ne.a.create({name:"normal_login"})(ce),ie=a(107),se=a.n(ie);var me=Object(c.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{changeAuthStateToAuth:function(t,a,n){var r=z(t,a,n);e(r)}}}))((function(e){var t=Object(w.g)(),a=(Object(w.h)().state||{from:{pathname:"/"}}).from,n=e.changeAuthStateToAuth;return r.a.createElement("div",{className:se.a.wrapper},r.a.createElement("div",{className:se.a["login-box"]},r.a.createElement("h3",{className:se.a.title},"\u56fe\u4e66\u7ba1\u7406\u540e\u53f0"),r.a.createElement(ue,{submitToParent:function(e){var r=e.username,l=e.password;n(r,l,t),t.replace(a)}})))})),pe=function(e){function t(){return Object(K.a)(this,t),Object(W.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"List")}}]),t}(n.Component);var he=function(e){var t=Object(w.h)();return r.a.createElement("div",null,r.a.createElement("h3",null,"404 not found. ",r.a.createElement("code",null,t.pathname)))},fe=a(70);var be=function(e){return r.a.createElement("div",{className:fe.wrapper+" "+fe.sticky},r.a.createElement("div",{className:fe["btn-group"]},r.a.createElement(te.a,{className:fe["btn-help"]},"\u663e\u793a\u5e2e\u52a9"),r.a.createElement(te.a,{className:fe["btn-add"]},"\u65b0\u589e\u7535\u5b50\u4e66")))},de=a(138),Ee=a.n(de),ge=a(200),_e=(a(438),a(204).a.Dragger),ye={customRequest:function(){var e=Object(ge.a)(Ee.a.mark((function e(t){var a,n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.file,(n=new FormData).append("file",a),(r=n,H.post("".concat(B,"/ebook/upload"),r)).then((function(e){console.log(e),U.a.success("".concat(t.file.name," file uploaded successfully."))})).catch((function(e){console.log(e),U.a.error("".concat(t.file.name," file upload failed."))}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()};var ve=function(){return r.a.createElement("div",{style:{height:"240px"}},r.a.createElement(_e,ye,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(j.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"\u70b9\u51fb\u6216\u62d6\u62fd\u4e0a\u4f20")))},Oe=a(108),ke=[{label:"\u4e66\u540d",name:"title",value:""},{label:"\u4f5c\u8005",name:"author",value:""},{label:"\u51fa\u7248\u793e",name:"publisher",value:""},{label:"\u8bed\u8a00",name:"language",value:""},{label:"\u6839\u6587\u4ef6",name:"rootFile",value:""},{label:"\u6587\u4ef6\u8def\u5f84",name:"filePath",value:""},{label:"\u89e3\u538b\u8def\u5f84",name:"unzipPath",value:""},{label:"\u5c01\u9762\u8def\u5f84",name:"coverPath",value:""},{label:"\u6587\u4ef6\u540d\u79f0",name:"fileName",value:""},{label:"\u6587\u4ef6\u539f\u59cb\u540d\u79f0",name:"originalName",value:""},{label:"\u5c01\u9762",name:"cover",value:""},{label:"\u76ee\u5f55",name:"contents",value:[]}],je={labelCol:{span:8},wrapperCol:{span:16}},Ae={wrapperCol:{offset:8,span:16}};var Ne=function(e){return r.a.createElement(ne.a,Object.assign({},je,{name:"basic",className:Oe.form}),ke.map((function(e,t){return r.a.createElement(ne.a.Item,{key:t,label:e.label,name:e.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\uff01".concat(e.label)}],className:Oe["form-item"]},r.a.createElement(re.a,{value:e.value}))})),r.a.createElement(ne.a.Item,Object.assign({},Ae,{className:Oe["form-item-submit"]}),r.a.createElement(te.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))},we=a(203),xe=function(e){function t(){return Object(K.a)(this,t),Object(W.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(Y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:we.wrapper},r.a.createElement(be,null),r.a.createElement(ve,null),r.a.createElement(Ne,null))}}]),t}(n.Component),Ce=A.a.SubMenu,Se=r.a.createElement(A.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(A.a.Item,{key:"1"},r.a.createElement(N.b,{to:"/"},r.a.createElement(j.a,{type:"dashboard"}),r.a.createElement("span",null,"\u9996\u9875"))),r.a.createElement(Ce,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(j.a,{type:"book"}),r.a.createElement("span",null,"\u56fe\u4e66\u7ba1\u7406"))},r.a.createElement(A.a.Item,{key:"sub1-1"},r.a.createElement(N.b,{to:"/list"},r.a.createElement(j.a,{type:"menu"}),r.a.createElement("span",null,"\u56fe\u4e66\u5217\u8868"))),r.a.createElement(A.a.Item,{key:"sub1-2"},r.a.createElement(N.b,{to:"/add"},r.a.createElement(j.a,{type:"edit"}),r.a.createElement("span",null,"\u6dfb\u52a0\u56fe\u4e66")))),r.a.createElement(A.a.Item,{key:"2"},r.a.createElement("a",{href:"https://github.com/cnscorpions/React-Nest-Admin",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(j.a,{type:"github"}),r.a.createElement("span",null,"Githu")))),Ie=[{path:"/",component:ee,isAuthenticated:!0,role:["root","user"]},{path:"/list",component:pe,isAuthenticated:!0,role:["root","user"]},{path:"/add",component:xe,isAuthenticated:!0,role:["root"]}];var Te=Object(c.b)((function(e){return{isAuth:e.auth.isAuth}}),null)((function(e){var t=e.isAuth;return r.a.createElement(N.a,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/login"},r.a.createElement(me,null)),Ie.map((function(e,a){return r.a.createElement(S,{key:a,exact:!0,path:e.path,isAuth:t},r.a.createElement(G,{content:r.a.createElement(e.component,null),sidebar:Se}))})),r.a.createElement(w.b,{path:"*"},r.a.createElement(he,null))))}));a(436);var Le=function(){return r.a.createElement(Te,null)};o.a.render(r.a.createElement(c.a,{store:O},r.a.createElement(u.a,{loading:null,persistor:k},r.a.createElement(Le,null))),document.getElementById("root"))},70:function(e,t,a){e.exports={wrapper:"sticky_wrapper__2Nn6c","btn-group":"sticky_btn-group__1IlPG","btn-help":"sticky_btn-help__1inQ4","btn-add":"sticky_btn-add__Jhbbi",sticky:"sticky_sticky__1DhND"}}},[[209,1,2]]]);
//# sourceMappingURL=main.0a22b9e6.chunk.js.map
(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{117:function(e,t,a){e.exports={"login-form":"LoginForm_login-form__40Eo9","login-form-forgot":"LoginForm_login-form-forgot__1yxxP","login-form-button":"LoginForm_login-form-button__nJkDr"}},118:function(e,t,a){e.exports={wrapper:"login_wrapper__2h4O6","login-box":"login_login-box__eOHuz",title:"login_title__xyNIF"}},119:function(e,t,a){e.exports={form:"ebookForm_form__1c_g8","form-item":"ebookForm_form-item__1Hfuh","form-item-submit":"ebookForm_form-item-submit__2rdCB"}},236:function(e,t,a){e.exports={wrapper:"add_wrapper__353VY",placeholder:"add_placeholder__b5QBS"}},240:function(e,t,a){e.exports=a(501)},37:function(e,t,a){e.exports={wrapper:"AppLayout_wrapper__2FM9W",header:"AppLayout_header__3IoRT",trigger:"AppLayout_trigger__3nEds",home:"AppLayout_home__2Oo45","icon-group":"AppLayout_icon-group__22Ic4","icon-box":"AppLayout_icon-box__3Db_0",icon:"AppLayout_icon__3WgRW"}},500:function(e,t,a){},501:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),o=a.n(l),c=a(58),u=a(221),i=a(34),s=a(162),m=a(222),p=a.n(m),d={isCollapsed:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIDEBAR_COLLAPSE":return{isCollapsed:!0};case"SIDEBAR_SPREAD":return{isCollapsed:!1};default:return e}},f={isAuth:!1,authToken:"",history:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return Object.assign({},e,{isAuth:!0,authToken:t.payload.token,history:t.payload.history});case"AUTH_NOT":return Object.assign({},e,{isAuth:!1,authToken:"",history:null});default:return e}},E=Object(i.c)({layout:h,auth:b}),g=a(223),y={key:"root",storage:p.a,whitelist:["auth"]},_=Object(s.a)(y,E),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,O=Object(i.e)(_,v(Object(i.a)(g.a))),k=Object(s.b)(O),j=(a(87),a(4)),N=(a(163),a(27)),A=a(53),x=a(60),w=a(238),I=a(224);var C=function(e){var t=e.children,a=Object(I.a)(e,["children"]),n=Object(w.a)({},a).isAuth;return r.a.createElement(x.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(x.a,{to:{pathname:"/login",state:{from:a}}})}}))},S=(a(164),a(81)),L=(a(121),a(80)),T=(a(257),a(84)),D=a(94),R=a.n(D),H=function(){var e=sessionStorage.getItem("persist:root"),t=JSON.parse(e).auth;return JSON.parse(t).authToken},P=R.a.create({baseURL:"http://localhost:3000",timeout:5e3});P.defaults.retry=4,P.defaults.retryDelay=1e3,P.interceptors.request.use((function(e){return H()&&(e.headers.Authorization=H()),e}));var F=R.a.create({baseURL:"http://localhost:3000",timeout:5e3});F.interceptors.request.use((function(e){return H()&&(e.headers.Authorization=H()),e.headers["Content-Type"]="multipart/form-data",e}));var B="https://react-nestjs-admin.xyz",U=(a(173),a(83)),q=function(e,t){switch(e){case"success":return U.a.success(t);case"error":return U.a.error(t);default:return null}},z=function(e,t,a){return function(n){return function(e,t){return R.a.post("".concat(B,"/login"),{username:e,password:t})}(e,t).then((function(e){q("success","\u767b\u5f55\u6210\u529f\uff01"),n(function(e,t){return{type:"AUTH",payload:{token:e,history:t}}}(e.data.data.token,a)),a.push("/")})).catch((function(e){q("error","\u8f93\u5165\u5e10\u53f7\u5bc6\u7801\u9519\u8bef"),console.error(e)}))}},J=a(37),M=a.n(J),V=T.a.Header,W=T.a.Sider,G=T.a.Content,K=Object(c.b)((function(e){return{isCollapsed:e.layout.isCollapsed}}),(function(e){return{toggle:function(t){e(t?{type:"SIDEBAR_SPREAD"}:{type:"SIDEBAR_COLLAPSE"})},signOut:function(t){e({type:"AUTH_NOT"}),t.push("/login")}}}))((function(e){var t=Object(x.g)(),a=e.isCollapsed,n=e.toggle,l=e.signOut;return r.a.createElement(T.a,{className:M.a.wrapper},r.a.createElement(W,{trigger:null,collapsible:!0,collapsed:a},e.sidebar),r.a.createElement(T.a,null,r.a.createElement(V,{className:M.a.header},r.a.createElement(j.a,{className:M.a.trigger,type:a?"menu-unfold":"menu-fold",onClick:function(){return n(a)}}),r.a.createElement("span",{className:M.a.home},"\u9996\u9875"),r.a.createElement("div",{className:M.a["icon-group"]},r.a.createElement("span",{className:M.a["icon-box"]},r.a.createElement(j.a,{className:M.a.icon,type:"fullscreen"})),r.a.createElement("span",{className:M.a["icon-box"]},r.a.createElement(L.a,{placement:"bottom",title:"\u5b57\u4f53\u5927\u5c0f"},r.a.createElement(j.a,{className:M.a.icon,type:"font-size"}))),r.a.createElement("span",{className:M.a["icon-box"]},r.a.createElement(S.a,{overlay:function(){return function(e,t){return r.a.createElement(N.a,null,r.a.createElement(N.a.Item,null,r.a.createElement("a",{href:"https://github.com/cnscorpions/React-Nest-Admin",target:"_blank",rel:"noopener noreferrer"},"\u6e90\u7801")),r.a.createElement(N.a.Item,{onClick:function(){return e(t)}},r.a.createElement("span",null,"\u9000\u51fa")))}(l,t)},placement:"bottomCenter"},r.a.createElement(j.a,{className:M.a.icon,type:"more"}))))),r.a.createElement(G,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},e.content)))})),Q=a(44),X=a(45),Y=a(47),Z=a(46),$=a(48),ee=function(e){function t(){return Object(Q.a)(this,t),Object(Y.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Home")}}]),t}(n.Component),te=(a(88),a(26)),ae=(a(187),a(59)),ne=(a(219),a(50)),re=(a(188),a(96)),le=a(117),oe=a.n(le),ce=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(Y.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||(console.log("Received values of form: ",t),a.props.submitToParent(t))}))},a}return Object($.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ne.a,{onSubmit:this.handleSubmit,className:oe.a["login-form"]},r.a.createElement(ne.a.Item,null,e("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}]})(r.a.createElement(re.a,{prefix:r.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u5e10\u53f7",autoComplete:"on"}))),r.a.createElement(ne.a.Item,null,e("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})(r.a.createElement(re.a,{prefix:r.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801",autoComplete:"on"}))),r.a.createElement(ne.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(ae.a,null,"\u8bb0\u4f4f\u5bc6\u7801")),r.a.createElement("a",{className:oe.a["login-form-forgot"],href:"/forget-pwd"},"\u5fd8\u8bb0\u5bc6\u7801"),r.a.createElement(te.a,{type:"primary",htmlType:"submit",className:oe.a["login-form-button"]},"\u767b\u5f55"),"\u6216 ",r.a.createElement("a",{href:"/home"},"\u73b0\u5728\u6ce8\u518c\uff01")))}}]),t}(n.Component),ue=ne.a.create({name:"normal_login"})(ce),ie=a(118),se=a.n(ie);var me=Object(c.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{changeAuthStateToAuth:function(t,a,n){var r=z(t,a,n);e(r)}}}))((function(e){var t=Object(x.g)(),a=(Object(x.h)().state||{from:{pathname:"/"}}).from,n=e.changeAuthStateToAuth;return r.a.createElement("div",{className:se.a.wrapper},r.a.createElement("div",{className:se.a["login-box"]},r.a.createElement("h3",{className:se.a.title},"\u56fe\u4e66\u7ba1\u7406\u540e\u53f0"),r.a.createElement(ue,{submitToParent:function(e){var r=e.username,l=e.password;n(r,l,t),t.replace(a)}})))})),pe=a(78),de=(a(502),a(161)),he=de.a.Column,fe=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(Y.a)(this,Object(Z.a)(t).call(this,e))).deleteHanler=a.deleteHanler.bind(Object(pe.a)(a)),a}return Object($.a)(t,e),Object(X.a)(t,[{key:"deleteHanler",value:function(e){(0,this.props.deleteItem)(e)}},{key:"render",value:function(){var e=this,t=this.props.data;return r.a.createElement(de.a,{dataSource:t,rowKey:function(e){return e._id}},r.a.createElement(he,{title:"\u4e66\u540d",dataIndex:"originalName",key:"originalName"}),r.a.createElement(he,{title:"\u4f5c\u8005",dataIndex:"author",key:"author"}),r.a.createElement(he,{title:"\u4e66\u540d",dataIndex:"publisher",key:"publisher"}),r.a.createElement(he,{title:"\u8bed\u8a00",dataIndex:"language",key:"language"}),r.a.createElement(he,{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(j.a,{type:"edit",style:{marginRight:16}}),r.a.createElement(j.a,{type:"delete",onClick:function(){return e.deleteHanler(a._id)}}))}}))}}]),t}(n.Component),be=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(Y.a)(this,Object(Z.a)(t).call(this,e))).getList=function(){P.get("".concat(B,"/ebook/list")).then((function(e){var t=e.data.data;a.setState((function(e){return{data:t}}))})).catch((function(e){console.log(e)}))},a.state={data:[]},a.deleteItem=a.deleteItem.bind(Object(pe.a)(a)),a}return Object($.a)(t,e),Object(X.a)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"deleteItem",value:function(e){var t,a=this;(t={id:e},P.post("".concat(B,"/ebook/delete"),t)).then((function(e){a.getList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(fe,{data:this.state.data,deleteItem:this.deleteItem}))}}]),t}(n.Component);var Ee=function(e){var t=Object(x.h)();return r.a.createElement("div",null,r.a.createElement("h3",null,"404 not found. ",r.a.createElement("code",null,t.pathname)))},ge=a(85);var ye=function(e){return r.a.createElement("div",{className:ge.wrapper+" "+ge.sticky},r.a.createElement("div",{className:ge["btn-group"]},r.a.createElement(te.a,{className:ge["btn-help"]},"\u663e\u793a\u5e2e\u52a9"),r.a.createElement(te.a,{className:ge["btn-add"]},"\u65b0\u589e\u7535\u5b50\u4e66")))},_e=a(160),ve=a.n(_e),Oe=a(233),ke=(a(503),a(237).a.Dragger),je={customRequest:function(){var e=Object(Oe.a)(ve.a.mark((function e(t){var a,n;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.file,(n=new FormData).append("file",a),(r=n,F.post("".concat(B,"/ebook/upload"),r)).then((function(e){console.log(e),U.a.success("".concat(t.file.name," file uploaded successfully."))})).catch((function(e){console.log(e),U.a.error("".concat(t.file.name," file upload failed."))}));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()};var Ne=function(){return r.a.createElement("div",{style:{height:"240px"}},r.a.createElement(ke,je,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(j.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"\u70b9\u51fb\u6216\u62d6\u62fd\u4e0a\u4f20")))},Ae=a(119),xe=[{label:"\u4e66\u540d",name:"title",value:""},{label:"\u4f5c\u8005",name:"author",value:""},{label:"\u51fa\u7248\u793e",name:"publisher",value:""},{label:"\u8bed\u8a00",name:"language",value:""},{label:"\u6839\u6587\u4ef6",name:"rootFile",value:""},{label:"\u6587\u4ef6\u8def\u5f84",name:"filePath",value:""},{label:"\u89e3\u538b\u8def\u5f84",name:"unzipPath",value:""},{label:"\u5c01\u9762\u8def\u5f84",name:"coverPath",value:""},{label:"\u6587\u4ef6\u540d\u79f0",name:"fileName",value:""},{label:"\u6587\u4ef6\u539f\u59cb\u540d\u79f0",name:"originalName",value:""},{label:"\u5c01\u9762",name:"cover",value:""},{label:"\u76ee\u5f55",name:"contents",value:[]}],we={labelCol:{span:8},wrapperCol:{span:16}},Ie={wrapperCol:{offset:8,span:16}};var Ce=function(e){return r.a.createElement(ne.a,Object.assign({},we,{name:"basic",className:Ae.form}),xe.map((function(e,t){return r.a.createElement(ne.a.Item,{key:t,label:e.label,name:e.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\uff01".concat(e.label)}],className:Ae["form-item"]},r.a.createElement(re.a,{value:e.value}))})),r.a.createElement(ne.a.Item,Object.assign({},Ie,{className:Ae["form-item-submit"]}),r.a.createElement(te.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))},Se=a(236),Le=function(e){function t(){return Object(Q.a)(this,t),Object(Y.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(X.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:Se.wrapper},r.a.createElement(ye,null),r.a.createElement(Ne,null),r.a.createElement(Ce,null))}}]),t}(n.Component),Te=N.a.SubMenu,De=r.a.createElement(N.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(N.a.Item,{key:"1"},r.a.createElement(A.b,{to:"/"},r.a.createElement(j.a,{type:"dashboard"}),r.a.createElement("span",null,"\u9996\u9875"))),r.a.createElement(Te,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(j.a,{type:"book"}),r.a.createElement("span",null,"\u56fe\u4e66\u7ba1\u7406"))},r.a.createElement(N.a.Item,{key:"sub1-1"},r.a.createElement(A.b,{to:"/list"},r.a.createElement(j.a,{type:"menu"}),r.a.createElement("span",null,"\u56fe\u4e66\u5217\u8868"))),r.a.createElement(N.a.Item,{key:"sub1-2"},r.a.createElement(A.b,{to:"/add"},r.a.createElement(j.a,{type:"edit"}),r.a.createElement("span",null,"\u6dfb\u52a0\u56fe\u4e66")))),r.a.createElement(N.a.Item,{key:"2"},r.a.createElement("a",{href:"https://github.com/cnscorpions/React-Nest-Admin",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(j.a,{type:"github"}),r.a.createElement("span",null,"Githu")))),Re=[{path:"/",component:ee,isAuthenticated:!0,role:["root","user"]},{path:"/list",component:be,isAuthenticated:!0,role:["root","user"]},{path:"/add",component:Le,isAuthenticated:!0,role:["root"]}];var He=Object(c.b)((function(e){return{isAuth:e.auth.isAuth}}),null)((function(e){var t=e.isAuth;return r.a.createElement(A.a,null,r.a.createElement(x.d,null,r.a.createElement(x.b,{exact:!0,path:"/login"},r.a.createElement(me,null)),Re.map((function(e,a){return r.a.createElement(C,{key:a,exact:!0,path:e.path,isAuth:t},r.a.createElement(K,{content:r.a.createElement(e.component,null),sidebar:De}))})),r.a.createElement(x.b,{path:"*"},r.a.createElement(Ee,null))))}));a(500);var Pe=function(){return r.a.createElement(He,null)};o.a.render(r.a.createElement(c.a,{store:O},r.a.createElement(u.a,{loading:null,persistor:k},r.a.createElement(Pe,null))),document.getElementById("root"))},85:function(e,t,a){e.exports={wrapper:"sticky_wrapper__2Nn6c","btn-group":"sticky_btn-group__1IlPG","btn-help":"sticky_btn-help__1inQ4","btn-add":"sticky_btn-add__Jhbbi",sticky:"sticky_sticky__1DhND"}}},[[240,1,2]]]);
//# sourceMappingURL=main.a651e851.chunk.js.map